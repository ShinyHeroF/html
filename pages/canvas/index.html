<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Canvas</title>
    <meta name="viewport"
      content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
  </head>
  <body>
    <script>
      let counter = 0

      // create a 1MB image
      const createImage = () => {
        const size = 512

        const canvas = document.createElement('canvas')
        canvas.height = size
        canvas.width = size

        const ctx = canvas.getContext('2d')

        ctx.strokeRect(0, 0, size, size)
        return canvas
      }

      const createImages = n => {
          // create n * 1MB images
          const ctxs = []

          for( let i=0 ; i<n ; i++ ){
              ctxs.push(createImage())
          }

          console.log(`done for ${ctxs.length} MB`)
          return ctxs;
      }

      const process = (frequency,size) => {
        setInterval(()=>{
            createImages(size)
            counter+=size
            console.log(`total ${counter}`)
        },frequency)
      }
      // process(2000,1000)
      createImages(1000)
    </script>
    <div>ssss</div>
  </body>
</html>